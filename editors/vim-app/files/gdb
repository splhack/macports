set gdbdistfile vimgdb72-1.14.tar.gz
variant gdb description {Enable GDB integration} {
    master_sites-append   sourceforge:clewn:gdb
    distfiles-append      ${gdbdistfile}:gdb
    checksums-append      ${gdbdistfile} md5 e406c64d29a3152a3f5d0fffe3d2bba8
    configure.args-append --enable-gdb
    patchfiles-append     patch-gdb.c
    post-extract {
        system "gnutar xvfz ${distpath}/${gdbdistfile} -C ${workpath}"
    }
    pre-patch {
        system "patch -d ${worksrcpath} -p0 < \
            ${workpath}/vimgdb/${distname}.diff"
    }
    post-destroot {
        set runtimePath \
            "${destroot}${applications_dir}/Vim.app/Contents/Resources/vim/runtime"
        system "gnutar xvfz ${workpath}/vimgdb/vimgdb_runtime.tgz \
            -C ${runtimePath}"
        system "${destroot}${applications_dir}/Vim.app/Contents/MacOS/Vim \
            --cmd \"helptag ${runtimePath}/doc\" \
            --cmd exit"
    }
}
