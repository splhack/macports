# $Id$
PortSystem 1.0

name			vimproc
version			v4.00
revision		0
categories		editors
maintainers		nomaintainer
description		Interactive command execution in Vim.
long_description \
	Interactive command execution in Vim.
homepage		http://github.com/Shougo/vimproc/
platforms		darwin

#set gittag		${version}
set gittag		04d3b27b6460fea87015edb90026822a4ffe8920
distname		${name}-${gittag}
use_zip			yes
checksums		${distname}.zip sha1 94b559dc1c082cc2305c94bec3e61f67534cb0a2
master_sites	"http://github.com/Shougo/vimproc/zipball/${gittag}?"
use_configure	no
build.cmd		make -f make_mac.mak

post-extract {
	system "mv ${workpath}/Shougo-vimproc-* ${workpath}/${distname}"
}

post-patch {
	reinplace -E "s/^(CFLAGS.*) -arch ppc64\$/\\1 -mmacosx-version-min=10.4/" \
		${worksrcpath}/make_mac.mak
}

destroot {
	set dstdir ${destroot}${prefix}/share/vimproc/autoload
	xinstall -d -m 0755 ${dstdir}
	xinstall -m 0755 ${worksrcpath}/autoload/proc.so ${dstdir}
	xinstall -m 0644 ${worksrcpath}/autoload/vimproc.vim ${dstdir}
	xinstall -d -m 0755 ${dstdir}/vimproc
	xinstall -m 0644 ${worksrcpath}/autoload/vimproc/parser.vim ${dstdir}/vimproc
}

default_variants +universal
variant universal {}
